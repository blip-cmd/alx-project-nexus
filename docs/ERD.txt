@startuml
entity User {
  *id : integer (Django default)
  --
  username : string
  email : string
  password : string (hashed)
  first_name : string
  last_name : string
  created_at : datetime
  last_login : datetime
}

entity Movie {
  *id : UUID
  --
  title : string
  description : text
  release_date : date
  duration : integer
  poster_image : URL
  trailer_url : URL
  imdb_rating : decimal(3,1)
  popularity_score : decimal(10,2)
  created_at : datetime
  updated_at : datetime
}

entity Genre {
  *id : UUID
  --
  name : string
  description : text
  created_at : datetime
}

entity MovieGenre {
  *movie_id : UUID
  *genre_id : UUID
}

entity Rating {
  *id : UUID
  *user_id : integer (FK to User)
  *movie_id : UUID (FK to Movie)
  --
  score : decimal(2,1) [0.5-5.0]
  review : text
  rated_at : datetime
  updated_at : datetime
}

entity WatchHistory {
  *id : UUID
  *user : integer (FK to User)
  *movie : UUID (FK to Movie)
  --
  watched_at : datetime
  watch_duration : integer
  completed : boolean
}

entity Favorite {
  *id : UUID
  *user : integer (FK to User)
  *movie : UUID (FK to Movie)
  --
  favorited_at : datetime
}

entity Tag {
  *id : UUID
  --
  name : string
  created_at : datetime
}

entity MovieTag {
  *movie_id : UUID
  *tag_id : UUID
}

User ||--o{ Rating : rates
User ||--o{ WatchHistory : watches
User ||--o{ Favorite : favorites
Movie ||--o{ Rating : receives
Movie ||--o{ WatchHistory : appears_in
Movie ||--o{ Favorite : is_favorited
Movie ||--o{ MovieGenre : categorized_as
Genre ||--o{ MovieGenre : groups
Movie ||--o{ MovieTag : tagged_with
Tag ||--o{ MovieTag : used_in
@enduml
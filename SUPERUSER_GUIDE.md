# 🔑 Superuser Creation for Render (No Shell Access)

Since Render's free tier doesn't provide shell access, we've implemented multiple solutions to create admin users:

## ✅ **Method 1: Automatic Creation During Deployment (Recommended)**

### How it works:
- During deployment, the build script automatically creates an admin user
- Uses environment variables for secure credential management
- Admin credentials are auto-generated by Render

### Setup:
1. **Already configured in `render.yaml`**:
   ```yaml
   envVars:
     - key: DJANGO_SUPERUSER_USERNAME
       value: admin
     - key: DJANGO_SUPERUSER_EMAIL  
       value: admin@movierecommendations.com
     - key: DJANGO_SUPERUSER_PASSWORD
       generateValue: true
   ```

2. **Build script automatically runs**:
   ```bash
   python manage.py createsuperuser_auto
   ```

### After deployment:
1. Go to Render dashboard → Environment Variables
2. Find `DJANGO_SUPERUSER_PASSWORD` - this is your admin password
3. Login at: `https://your-app.onrender.com/admin/`
   - Username: `admin`
   - Email: `admin@movierecommendations.com`  
   - Password: [from environment variable]

---

## ✅ **Method 2: API Endpoint Creation (Backup)**

If automatic creation fails, use the API endpoint:

### Check admin status:
```bash
curl https://your-app.onrender.com/api/auth/admin/status/
```

### Create admin via API (only if none exists):
```bash
curl -X POST https://your-app.onrender.com/api/auth/admin/create/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "email": "admin@example.com", 
    "password": "your-secure-password"
  }'
```

**Security**: This endpoint is only enabled when no admin exists.

---

## ✅ **Method 3: Manual Management Command**

You can also run the management command manually if needed:

```bash
# With default values
python manage.py createsuperuser_auto

# With custom values  
python manage.py createsuperuser_auto \
  --username mycustomadmin \
  --email admin@mycompany.com \
  --password mysecurepassword
```

---

## 🔐 **Security Notes:**

1. **Change default password immediately** after first login
2. **Use strong passwords** for production
3. **API endpoint auto-disables** after admin creation
4. **Environment variables** are the most secure method

---

## 🚨 **Troubleshooting:**

### If admin creation fails:
1. Check Render deployment logs
2. Try Method 2 (API endpoint)
3. Verify environment variables are set

### If you can't access admin:
1. Check the generated password in Render dashboard
2. Try creating new admin via API
3. Check `/health/` endpoint for system status

---

## 📋 **Quick Access After Deployment:**

- **Admin Panel**: `https://your-app.onrender.com/admin/`
- **Admin Status**: `https://your-app.onrender.com/api/auth/admin/status/`
- **API Docs**: `https://your-app.onrender.com/swagger/`
- **Health Check**: `https://your-app.onrender.com/health/`

The superuser will be created automatically during deployment! 🎉